<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Traitement des données PMSI avec R</title>
  <meta name="description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Traitement des données PMSI avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Traitement des données PMSI avec R" />
  
  <meta name="twitter:description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R" />
  

<meta name="author" content="Guillaume Pressiat || SIMAP / DOMU / Assistance Publique - Hôpitaux de Paris">


<meta name="date" content="2018-07-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="requetr-rediger-executer-des-requetes-pmsi.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><b><span style="background-color: white; opacity:0.7;"><a href="https://guillaumepressiat.github.io"><< Retour au blog pmeasyr</a></b></span></li>
<li><a href="./">Traitement des données PMSI avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="contexte.html"><a href="contexte.html"><i class="fa fa-check"></i><b>2</b> Contexte et motivations</a><ul>
<li class="chapter" data-level="2.1" data-path="contexte.html"><a href="contexte.html#avantages-de-r"><i class="fa fa-check"></i><b>2.1</b> Avantages de R</a><ul>
<li class="chapter" data-level="2.1.1" data-path="contexte.html"><a href="contexte.html#un-flux-de-travail-unique"><i class="fa fa-check"></i><b>2.1.1</b> Un flux de travail unique</a></li>
<li class="chapter" data-level="2.1.2" data-path="contexte.html"><a href="contexte.html#r-et-le-pmsi"><i class="fa fa-check"></i><b>2.1.2</b> R et le PMSI</a></li>
<li class="chapter" data-level="2.1.3" data-path="contexte.html"><a href="contexte.html#des-outils-performants"><i class="fa fa-check"></i><b>2.1.3</b> Des outils performants</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="contexte.html"><a href="contexte.html#contenu-du-package"><i class="fa fa-check"></i><b>2.2</b> Contenu du package</a></li>
<li class="chapter" data-level="2.3" data-path="contexte.html"><a href="contexte.html#installation-du-package"><i class="fa fa-check"></i><b>2.3</b> Installation du package</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="archives.html"><a href="archives.html"><i class="fa fa-check"></i><b>3</b> Les archives PMSI</a><ul>
<li class="chapter" data-level="3.1" data-path="archives.html"><a href="archives.html#arborescence-des-archives"><i class="fa fa-check"></i><b>3.1</b> Arborescence des archives</a><ul>
<li class="chapter" data-level="3.1.1" data-path="archives.html"><a href="archives.html#sous-unix"><i class="fa fa-check"></i><b>3.1.1</b> Sous Unix</a></li>
<li class="chapter" data-level="3.1.2" data-path="archives.html"><a href="archives.html#sous-windows"><i class="fa fa-check"></i><b>3.1.2</b> Sous Windows</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="archives.html"><a href="archives.html#informations-sur-les-archives"><i class="fa fa-check"></i><b>3.2</b> Informations sur les archives</a></li>
<li class="chapter" data-level="3.3" data-path="archives.html"><a href="archives.html#dezippage"><i class="fa fa-check"></i><b>3.3</b> Dézippage</a></li>
<li class="chapter" data-level="3.4" data-path="archives.html"><a href="archives.html#suppression"><i class="fa fa-check"></i><b>3.4</b> Suppression</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="import-des-donnees.html"><a href="import-des-donnees.html"><i class="fa fa-check"></i><b>4</b> Import des données</a><ul>
<li class="chapter" data-level="4.1" data-path="import-des-donnees.html"><a href="import-des-donnees.html#mco"><i class="fa fa-check"></i><b>4.1</b> MCO</a><ul>
<li class="chapter" data-level="4.1.1" data-path="import-des-donnees.html"><a href="import-des-donnees.html#rsa"><i class="fa fa-check"></i><b>4.1.1</b> RSA</a></li>
<li class="chapter" data-level="4.1.2" data-path="import-des-donnees.html"><a href="import-des-donnees.html#rum"><i class="fa fa-check"></i><b>4.1.2</b> RUM</a></li>
<li class="chapter" data-level="4.1.3" data-path="import-des-donnees.html"><a href="import-des-donnees.html#colonnes-stream"><i class="fa fa-check"></i><b>4.1.3</b> Colonnes stream</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="import-des-donnees.html"><a href="import-des-donnees.html#had"><i class="fa fa-check"></i><b>4.2</b> HAD</a></li>
<li class="chapter" data-level="4.3" data-path="import-des-donnees.html"><a href="import-des-donnees.html#ssr"><i class="fa fa-check"></i><b>4.3</b> SSR</a></li>
<li class="chapter" data-level="4.4" data-path="import-des-donnees.html"><a href="import-des-donnees.html#psy"><i class="fa fa-check"></i><b>4.4</b> PSY</a></li>
<li class="chapter" data-level="4.5" data-path="import-des-donnees.html"><a href="import-des-donnees.html#rsf"><i class="fa fa-check"></i><b>4.5</b> RSF</a></li>
<li class="chapter" data-level="4.6" data-path="import-des-donnees.html"><a href="import-des-donnees.html#dictionnaire-de-variables"><i class="fa fa-check"></i><b>4.6</b> Dictionnaire de variables</a></li>
<li class="chapter" data-level="4.7" data-path="import-des-donnees.html"><a href="import-des-donnees.html#labels"><i class="fa fa-check"></i><b>4.7</b> Labels</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="requetes-sur-des-pathologies-actes.html"><a href="requetes-sur-des-pathologies-actes.html"><i class="fa fa-check"></i><b>5</b> Requêtes sur des pathologies / actes</a><ul>
<li class="chapter" data-level="5.1" data-path="requetes-sur-des-pathologies-actes.html"><a href="requetes-sur-des-pathologies-actes.html#transposition-des-codes-diagnostics"><i class="fa fa-check"></i><b>5.1</b> Transposition des codes diagnostics</a></li>
<li class="chapter" data-level="5.2" data-path="requetes-sur-des-pathologies-actes.html"><a href="requetes-sur-des-pathologies-actes.html#recherche-de-codes-diagnostics"><i class="fa fa-check"></i><b>5.2</b> Recherche de codes diagnostics</a></li>
<li class="chapter" data-level="5.3" data-path="requetes-sur-des-pathologies-actes.html"><a href="requetes-sur-des-pathologies-actes.html#recherche-de-codes-actes"><i class="fa fa-check"></i><b>5.3</b> Recherche de codes actes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="etude-des-files-actives.html"><a href="etude-des-files-actives.html"><i class="fa fa-check"></i><b>6</b> Étude des files actives</a><ul>
<li class="chapter" data-level="6.1" data-path="etude-des-files-actives.html"><a href="etude-des-files-actives.html#import-des-donnees-anohosp"><i class="fa fa-check"></i><b>6.1</b> Import des données Anohosp</a></li>
<li class="chapter" data-level="6.2" data-path="etude-des-files-actives.html"><a href="etude-des-files-actives.html#file-active-dune-pathologie"><i class="fa fa-check"></i><b>6.2</b> File active d’une pathologie</a></li>
<li class="chapter" data-level="6.3" data-path="etude-des-files-actives.html"><a href="etude-des-files-actives.html#file-active-dune-chirurgie"><i class="fa fa-check"></i><b>6.3</b> File active d’une chirurgie</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fichier-tra.html"><a href="fichier-tra.html"><i class="fa fa-check"></i><b>7</b> Fichier TRA</a><ul>
<li class="chapter" data-level="7.1" data-path="fichier-tra.html"><a href="fichier-tra.html#ajout-du-tra-en-mco"><i class="fa fa-check"></i><b>7.1</b> Ajout du TRA en MCO</a></li>
<li class="chapter" data-level="7.2" data-path="fichier-tra.html"><a href="fichier-tra.html#ajout-du-tra-en-had"><i class="fa fa-check"></i><b>7.2</b> Ajout du TRA en HAD</a></li>
<li class="chapter" data-level="7.3" data-path="fichier-tra.html"><a href="fichier-tra.html#ajout-du-tra-en-ssr"><i class="fa fa-check"></i><b>7.3</b> Ajout du TRA en SSR</a></li>
<li class="chapter" data-level="7.4" data-path="fichier-tra.html"><a href="fichier-tra.html#ajout-du-tra-en-psy"><i class="fa fa-check"></i><b>7.4</b> Ajout du TRA en PSY</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="statistiques-du-pmsi.html"><a href="statistiques-du-pmsi.html"><i class="fa fa-check"></i><b>8</b> Statistiques du PMSI</a><ul>
<li class="chapter" data-level="8.1" data-path="statistiques-du-pmsi.html"><a href="statistiques-du-pmsi.html#age-et-duree-de-sejour"><i class="fa fa-check"></i><b>8.1</b> Âge et durée de séjour</a></li>
<li class="chapter" data-level="8.2" data-path="statistiques-du-pmsi.html"><a href="statistiques-du-pmsi.html#nombre-de-sejours-par-categorie-majeure-de-diagnostics"><i class="fa fa-check"></i><b>8.2</b> Nombre de séjours par catégorie majeure de diagnostics</a></li>
<li class="chapter" data-level="8.3" data-path="statistiques-du-pmsi.html"><a href="statistiques-du-pmsi.html#case-mix-mco-dms-par-ghm-ghs"><i class="fa fa-check"></i><b>8.3</b> Case-mix MCO, DMS par GHM / GHS</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="help.html"><a href="help.html"><i class="fa fa-check"></i><b>9</b> Help</a></li>
<li class="chapter" data-level="10" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html"><i class="fa fa-check"></i><b>10</b> Noyau de paramètres</a><ul>
<li class="chapter" data-level="10.1" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html#quatre-parametres"><i class="fa fa-check"></i><b>10.1</b> Quatre paramètres</a></li>
<li class="chapter" data-level="10.2" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html#solution-avec-noyau_pmeasyr"><i class="fa fa-check"></i><b>10.2</b> Solution avec <code>noyau_pmeasyr()</code></a><ul>
<li class="chapter" data-level="10.2.1" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html#definir-le-noyau-de-parametres"><i class="fa fa-check"></i><b>10.2.1</b> Définir le noyau de paramètres</a></li>
<li class="chapter" data-level="10.2.2" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html#utiliser-le-noyau-de-parametres"><i class="fa fa-check"></i><b>10.2.2</b> Utiliser le noyau de paramètres</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="noyau-de-parametres.html"><a href="noyau-de-parametres.html#noyau_skeleton"><i class="fa fa-check"></i><b>10.3</b> <code>noyau_skeleton()</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html"><i class="fa fa-check"></i><b>11</b> Restructurer des listes de codes : enrobeur</a><ul>
<li class="chapter" data-level="11.0.1" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html#pour-du-sql-like-..-left-right"><i class="fa fa-check"></i><b>11.0.1</b> Pour du SQL %like% %..% (left &amp; right)</a></li>
<li class="chapter" data-level="11.0.2" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html#sql-like-.."><i class="fa fa-check"></i><b>11.0.2</b> SQL %like% ..%</a></li>
<li class="chapter" data-level="11.0.3" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html#sql-like-..-1"><i class="fa fa-check"></i><b>11.0.3</b> SQL %like% %..</a></li>
<li class="chapter" data-level="11.0.4" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html#pour-du-grepl"><i class="fa fa-check"></i><b>11.0.4</b> Pour du grepl</a></li>
<li class="chapter" data-level="11.0.5" data-path="restructurer-des-listes-de-codes-enrobeur.html"><a href="restructurer-des-listes-de-codes-enrobeur.html#pour-du-listing"><i class="fa fa-check"></i><b>11.0.5</b> Pour du listing</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="noms-de-colonnes-en-minuscules.html"><a href="noms-de-colonnes-en-minuscules.html"><i class="fa fa-check"></i><b>12</b> Noms de colonnes en minuscules</a></li>
<li class="chapter" data-level="13" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html"><i class="fa fa-check"></i><b>13</b> Vers la base de données avec <code>pmeasyr</code></a><ul>
<li class="chapter" data-level="13.1" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#connexion-a-une-base-de-donnees"><i class="fa fa-check"></i><b>13.1</b> Connexion à une base de données</a><ul>
<li class="chapter" data-level="13.1.1" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#monetdb"><i class="fa fa-check"></i><b>13.1.1</b> monetdb</a></li>
<li class="chapter" data-level="13.1.2" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#sqlite"><i class="fa fa-check"></i><b>13.1.2</b> SQLite</a></li>
<li class="chapter" data-level="13.1.3" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#postgres"><i class="fa fa-check"></i><b>13.1.3</b> PostGres</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#integration-en-base"><i class="fa fa-check"></i><b>13.2</b> Intégration en base</a><ul>
<li class="chapter" data-level="13.2.1" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#definition-des-parametres"><i class="fa fa-check"></i><b>13.2.1</b> Définition des paramètres</a></li>
<li class="chapter" data-level="13.2.2" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#exemple-dimport"><i class="fa fa-check"></i><b>13.2.2</b> Exemple d’import</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#acceder-aux-donnees-dans-la-base"><i class="fa fa-check"></i><b>13.3</b> Accéder aux données dans la base</a><ul>
<li class="chapter" data-level="13.3.1" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#lister-les-tables-dans-la-base"><i class="fa fa-check"></i><b>13.3.1</b> Lister les tables dans la base</a></li>
<li class="chapter" data-level="13.3.2" data-path="vers-la-base-de-donnees-avec-pmeasyr.html"><a href="vers-la-base-de-donnees-avec-pmeasyr.html#acceder-aux-tables-mco-out"><i class="fa fa-check"></i><b>13.3.2</b> Accéder aux tables mco out</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html"><i class="fa fa-check"></i><b>14</b> requetr : rédiger, exécuter des requêtes pmsi</a><ul>
<li class="chapter" data-level="14.1" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#definir-une-requete"><i class="fa fa-check"></i><b>14.1</b> Définir une requête</a><ul>
<li class="chapter" data-level="14.1.1" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#exemple-simple"><i class="fa fa-check"></i><b>14.1.1</b> Exemple simple</a></li>
<li class="chapter" data-level="14.1.2" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#exemple-plus-complexe"><i class="fa fa-check"></i><b>14.1.2</b> Exemple plus complexe</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#requetes-sur-des-rsa-importes-avec-irsa"><i class="fa fa-check"></i><b>14.2</b> Requêtes sur des rsa importés avec <code>irsa</code></a></li>
<li class="chapter" data-level="14.3" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#requetes-sur-des-rsa-dans-la-base-de-donnees"><i class="fa fa-check"></i><b>14.3</b> Requêtes sur des rsa dans la base de données</a></li>
<li class="chapter" data-level="14.4" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#elements-possibles-pour-une-requete"><i class="fa fa-check"></i><b>14.4</b> Éléments possibles pour une requête</a></li>
<li class="chapter" data-level="14.5" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#lancer-plusieurs-requetes"><i class="fa fa-check"></i><b>14.5</b> Lancer plusieurs requêtes</a><ul>
<li class="chapter" data-level="14.5.1" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#exemple-de-liste-de-requetes"><i class="fa fa-check"></i><b>14.5.1</b> Exemple de liste de requêtes</a></li>
<li class="chapter" data-level="14.5.2" data-path="requetr-rediger-executer-des-requetes-pmsi.html"><a href="requetr-rediger-executer-des-requetes-pmsi.html#lancement"><i class="fa fa-check"></i><b>14.5.2</b> Lancement</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html"><i class="fa fa-check"></i><b>15</b> vvr : Valoriser les rsa</a><ul>
<li class="chapter" data-level="15.1" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#acceder-aux-tarifs-depuis-r"><i class="fa fa-check"></i><b>15.1</b> Accéder aux tarifs depuis R</a></li>
<li class="chapter" data-level="15.2" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#etape-sejour"><i class="fa fa-check"></i><b>15.2</b> Étape séjour</a><ul>
<li class="chapter" data-level="15.2.1" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#preparation-des-rsa"><i class="fa fa-check"></i><b>15.2.1</b> Préparation des rsa</a></li>
<li class="chapter" data-level="15.2.2" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#calculer-la-valorisation-ghs-borne-extreme-haut-extreme-bas"><i class="fa fa-check"></i><b>15.2.2</b> Calculer la valorisation GHS borne extrême haut + extrême bas</a></li>
<li class="chapter" data-level="15.2.3" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#calculer-la-valorisation-ghs-borne-extreme-haut-extreme-bas-et-supplements"><i class="fa fa-check"></i><b>15.2.3</b> Calculer la valorisation GHS borne extrême haut + extrême bas et suppléments</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#etape-facture"><i class="fa fa-check"></i><b>15.3</b> Étape facture</a><ul>
<li class="chapter" data-level="15.3.1" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#preparation-des-ano"><i class="fa fa-check"></i><b>15.3.1</b> Préparation des ano</a></li>
<li class="chapter" data-level="15.3.2" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#attribuer-le-caractere-facturable-du-sejour-tel-que-sur-epmsi-tableau-sv"><i class="fa fa-check"></i><b>15.3.2</b> Attribuer le caractère facturable du séjour tel que sur epmsi (tableau sv)</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#conjuguer-la-valorisation-des-sejours-a-leur-caractere-facturable"><i class="fa fa-check"></i><b>15.4</b> Conjuguer la valorisation des séjours à leur caractère facturable</a></li>
<li class="chapter" data-level="15.5" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#concordance-avec-epmsi"><i class="fa fa-check"></i><b>15.5</b> Concordance avec epmsi</a></li>
<li class="chapter" data-level="15.6" data-path="vvr-valoriser-les-rsa.html"><a href="vvr-valoriser-les-rsa.html#vignette-presentant-ces-fonctions"><i class="fa fa-check"></i><b>15.6</b> Vignette présentant ces fonctions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publié avec bookdown</a></li>
<li><b><span style="background-color: white; opacity:0.7;"><a href="https://guillaumepressiat.github.io"><< Retour au blog pmeasyr</a></b></span></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Traitement des données PMSI avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vvr-valoriser-les-rsa" class="section level1">
<h1><span class="header-section-number">15</span> vvr : Valoriser les rsa</h1>
<p><em>Valorisation, cf <a href="https://fr.wikipedia.org/wiki/Valorisation">wikipédia</a></em></p>
<ul>
<li><em>processus de détermination de la valeur d’un objet, d’un actif, d’une entité. L’objectif est d’établir un prix.</em></li>
<li><em>processus visant à améliorer la valeur de cet objet, actif, entité</em></li>
</ul>
<p>Cette partie de <code>pmeasyr</code> permet de constituer des tables contenant les informations de valorisation de chaque rsa, en accord avec la valorisation epmsi, donc avec la valorisation VisualValoSej (VVS, d’où le choix du nom vvr).</p>
<p>Trois étapes sont distinguées pour reproduire la valorisation d’un rsa :</p>
<ul>
<li>disposer des référentiels de tarifs</li>
<li>une étape autour du séjour : la valorisation GHS + suppléments, etc</li>
<li>une étape autour de la facture : le caractère facturable ou non du séjour est déterminé.</li>
</ul>
<p>Pour ces deux dernières étapes, la logique retenue a été la suivante : deux fonctions permettent de constituer une table séjour (rsa) et une table facture (ano) contenant les variables utiles.</p>
<div id="acceder-aux-tarifs-depuis-r" class="section level2">
<h2><span class="header-section-number">15.1</span> Accéder aux tarifs depuis R</h2>
<p>Le package intitulé <a href="https://guillaumepressiat.github.io/nomensland/index.html">nomensland</a> contient un ensemble de référentiels utiles dans le PMSI, parmi lesquels les tarifs GHS et suppléments du MCO pour les établissements publics.</p>
<p>Il est nécessaire d’installer ce package ou de disposer de tables dont la structure et les noms de colonnes sont identiques à celles de ce package pour pouvoir continuer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tarifs      &lt;-<span class="st"> </span>nomensland::<span class="kw">get_table</span>(<span class="st">&#39;tarifs_mco_ghs&#39;</span>) %&gt;%<span class="st"> </span><span class="kw">distinct</span>(ghs, anseqta, <span class="dt">.keep_all =</span> <span class="ot">TRUE</span>)
supplements &lt;-<span class="st"> </span>nomensland::<span class="kw">get_table</span>(<span class="st">&#39;tarifs_mco_supplements&#39;</span>) %&gt;%<span class="st"> </span><span class="kw">mutate_if</span>(is.numeric, tidyr::replace_na, <span class="dv">0</span>)</code></pre></div>
</div>
<div id="etape-sejour" class="section level2">
<h2><span class="header-section-number">15.2</span> Étape séjour</h2>
<p>Il y a plusieurs possibilités pour cette étape : valoriser uniquement les GHS + bornes extrêmes, ou bien valoriser l’intégralité des rubriques de valorisation.</p>
<p>Mais il faut d’abord préparer la table rsa spécifique à la valorisation.</p>
<div id="preparation-des-rsa" class="section level3">
<h3><span class="header-section-number">15.2.1</span> Préparation des rsa</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># avec un noyau pmeasyr (importer les données)</span>
annee &lt;-<span class="st"> </span><span class="dv">18</span>
p &lt;-<span class="st"> </span><span class="kw">noyau_pmeasyr</span>(
  <span class="dt">finess   =</span> <span class="st">&#39;750712184&#39;</span>,
  <span class="dt">annee    =</span> <span class="dv">2000</span> +<span class="st"> </span>annee,
  <span class="dt">mois     =</span> <span class="dv">6</span>,
  <span class="dt">path     =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>,
  <span class="dt">progress =</span> <span class="ot">FALSE</span>,
  <span class="dt">n_max    =</span> <span class="ot">Inf</span>,
  <span class="dt">lib      =</span> <span class="ot">FALSE</span>,
  <span class="dt">tolower_names =</span> <span class="ot">TRUE</span>)

vrsa &lt;-<span class="st"> </span><span class="kw">vvr_rsa</span>(p)

<span class="co"># depuis une base de données (collecter les données)</span>
dbdir &lt;-<span class="st"> &quot;~/Documents/data/monetdb&quot;</span>
con &lt;-<span class="st"> </span><span class="kw">src_monetdblite</span>(dbdir)

vrsa &lt;-<span class="st"> </span><span class="kw">vvr_rsa</span>(con, annee)</code></pre></div>
</div>
<div id="calculer-la-valorisation-ghs-borne-extreme-haut-extreme-bas" class="section level3">
<h3><span class="header-section-number">15.2.2</span> Calculer la valorisation GHS borne extrême haut + extrême bas</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Recette GHS de base et suppléments EXB, EXH</span>
rsa_v &lt;-<span class="st"> </span><span class="kw">vvr_ghs_supp</span>(<span class="dt">rsa =</span> vrsa, <span class="dt">tarifs =</span> tarifs)</code></pre></div>
</div>
<div id="calculer-la-valorisation-ghs-borne-extreme-haut-extreme-bas-et-supplements" class="section level3">
<h3><span class="header-section-number">15.2.3</span> Calculer la valorisation GHS borne extrême haut + extrême bas et suppléments</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Recette GHS de base, EXB, EXH, et suppléments</span>
rsa_v &lt;-<span class="st"> </span><span class="kw">vvr_ghs_supp</span>(vrsa, tarifs, supplements, vano, <span class="kw">ipo</span>(p), <span class="kw">idiap</span>(p), <span class="dt">pie =</span> <span class="kw">ipie</span>(p), <span class="dt">bee =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
</div>
<div id="etape-facture" class="section level2">
<h2><span class="header-section-number">15.3</span> Étape facture</h2>
<div id="preparation-des-ano" class="section level3">
<h3><span class="header-section-number">15.3.1</span> Préparation des ano</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Not run: 
<span class="co"># avec un noyau pmeasyr (importer les données)</span>
p &lt;-<span class="st"> </span><span class="kw">noyau_pmeasyr</span>(
  <span class="dt">finess   =</span> <span class="st">&#39;750712184&#39;</span>,
  <span class="dt">annee    =</span> <span class="dv">2000</span> +<span class="st"> </span><span class="dv">18</span>,
  <span class="dt">mois     =</span> <span class="dv">4</span>,
  <span class="dt">path     =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>,
  <span class="dt">progress =</span> <span class="ot">FALSE</span>,
  <span class="dt">n_max    =</span> <span class="ot">Inf</span>,
  <span class="dt">lib      =</span> <span class="ot">FALSE</span>,
  <span class="dt">tolower_names =</span> <span class="ot">TRUE</span>)

vano &lt;-<span class="st"> </span><span class="kw">vvr_ano_mco</span>(p)

<span class="co"># depuis une base de données (collecter les données)</span>
dbdir &lt;-<span class="st"> &quot;~/Documents/data/monetdb&quot;</span>
con &lt;-<span class="st"> </span><span class="kw">src_monetdblite</span>(dbdir)

vano &lt;-<span class="st"> </span><span class="kw">vvr_ano_mco</span>(con, <span class="dv">18</span>)</code></pre></div>
</div>
<div id="attribuer-le-caractere-facturable-du-sejour-tel-que-sur-epmsi-tableau-sv" class="section level3">
<h3><span class="header-section-number">15.3.2</span> Attribuer le caractère facturable du séjour tel que sur epmsi (tableau sv)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Not run: 
<span class="co"># Tenir compte des porg</span>
ano_sv &lt;-<span class="st"> </span><span class="kw">vvr_mco_sv</span>(vrsa, vano, <span class="dt">porg =</span> <span class="kw">ipo</span>(p))

<span class="co"># ne pas tenir compte des porg</span>
ano_sv &lt;-<span class="st"> </span><span class="kw">vvr_mco_sv</span>(vrsa, vano)

## End(Not run)</code></pre></div>
</div>
</div>
<div id="conjuguer-la-valorisation-des-sejours-a-leur-caractere-facturable" class="section level2">
<h2><span class="header-section-number">15.4</span> Conjuguer la valorisation des séjours à leur caractère facturable</h2>
<p>Une fois que les éléments sont prêts, on peut les rassembler :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">valo_rsa &lt;-<span class="st"> </span><span class="kw">vvr_mco</span>(rsa_v, ano_sv)</code></pre></div>
<p>Ou tout calculer en un seul appel à ces différentes fonctions :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">resu &lt;-<span class="st"> </span><span class="kw">vvr_mco</span>(
<span class="kw">vvr_ghs_supp</span>(<span class="dt">rsa =</span> vrsa, 
             <span class="dt">tarifs =</span> tarifs_ghs, 
             <span class="dt">supplements =</span>  tarifs_supp, 
             <span class="dt">ano =</span> vano, 
             <span class="dt">porg =</span> <span class="kw">ipo</span>(p), 
             <span class="dt">diap =</span> <span class="kw">idiap</span>(p), 
             <span class="dt">pie =</span> <span class="kw">ipie</span>(p), 
             <span class="dt">full =</span> <span class="ot">FALSE</span>,
             <span class="dt">cgeo =</span> <span class="fl">1.07</span>, 
             <span class="dt">prudent =</span> <span class="ot">NULL</span>,
             <span class="dt">bee =</span> <span class="ot">FALSE</span>),
<span class="kw">vvr_mco_sv</span>(vrsa, vano, <span class="kw">ipo</span>(p))
)</code></pre></div>
</div>
<div id="concordance-avec-epmsi" class="section level2">
<h2><span class="header-section-number">15.5</span> Concordance avec epmsi</h2>
<p>Deux fonctions permettent de produire des tableaux importants sur epmsi : cela permet de s’assurer que le résultat est ok.</p>
<ul>
<li>Tableau [1.V.1.SV]: Séjours valorisés</li>
<li>Tableau [1.V.1.RAV]: Récapitulation activité - valorisation &amp; Tableau [1.V.1.RAE]: Récapitulation activité - effectifs</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">epmsi_mco_sv</span>(valo_rsa, <span class="dt">knit =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">epmsi_mco_rav</span>(valo, <span class="dt">knit =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Ce dernier tableau contient à la fois le RAE et le RAV.</p>
</div>
<div id="vignette-presentant-ces-fonctions" class="section level2">
<h2><span class="header-section-number">15.6</span> Vignette présentant ces fonctions</h2>
<p>Un concentré de l’utilisation de ces fonctions, ainsi qu’un dictionnaire des variables présentes dans les tables produites sont disponibles dans l’<a href="https://im-aphp.github.io/pmeasyr/articles/vignette4.html">une des vignettes</a> du package.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="requetr-rediger-executer-des-requetes-pmsi.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["pmeasyr-book.pdf", "pmeasyr-book.epub"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
