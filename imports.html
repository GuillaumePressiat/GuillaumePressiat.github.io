<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Traitement des données PMSI avec R</title>
  <meta name="description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R">
  <meta name="generator" content="bookdown 0.3.9 and GitBook 2.6.7">

  <meta property="og:title" content="Traitement des données PMSI avec R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Traitement des données PMSI avec R" />
  
  <meta name="twitter:description" content="Ce livre numérique présente des exemples de traitements de données PMSI avec R" />
  

<meta name="author" content="Guillaume Pressiat">


<meta name="date" content="2017-02-10">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="literature.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Traitement des données PMSI avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#contexte"><i class="fa fa-check"></i><b>1.1</b> Contexte</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#avantages-de-r"><i class="fa fa-check"></i><b>1.2</b> Avantages de R</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#un-flux-de-travail-unique"><i class="fa fa-check"></i><b>1.2.1</b> Un flux de travail unique</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#r-et-le-pmsi"><i class="fa fa-check"></i><b>1.2.2</b> R et le PMSI</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#des-outils-performants"><i class="fa fa-check"></i><b>1.2.3</b> Des outils performants</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#contenu-du-package"><i class="fa fa-check"></i><b>1.3</b> Contenu du package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#installation-du-package"><i class="fa fa-check"></i><b>1.4</b> Installation du package</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="imports.html"><a href="imports.html"><i class="fa fa-check"></i><b>2</b> Imports des données</a><ul>
<li class="chapter" data-level="2.1" data-path="imports.html"><a href="imports.html#les-archives-pmsi"><i class="fa fa-check"></i><b>2.1</b> Les archives PMSI</a><ul>
<li class="chapter" data-level="2.1.1" data-path="imports.html"><a href="imports.html#gestion-des-archives-dans-des-repertoires"><i class="fa fa-check"></i><b>2.1.1</b> Gestion des archives dans des répertoires</a></li>
<li class="chapter" data-level="2.1.2" data-path="imports.html"><a href="imports.html#informations-sur-les-archives"><i class="fa fa-check"></i><b>2.1.2</b> Informations sur les archives</a></li>
<li class="chapter" data-level="2.1.3" data-path="imports.html"><a href="imports.html#dezippage"><i class="fa fa-check"></i><b>2.1.3</b> Dézippage</a></li>
<li class="chapter" data-level="2.1.4" data-path="imports.html"><a href="imports.html#adelete-effacer"><i class="fa fa-check"></i><b>2.1.4</b> adelete : effacer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>3</b> Literature</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>5</b> Applications</a><ul>
<li class="chapter" data-level="5.1" data-path="applications.html"><a href="applications.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="applications.html"><a href="applications.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>6</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publié avec bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Traitement des données PMSI avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="imports" class="section level1">
<h1><span class="header-section-number">2</span> Imports des données</h1>
<p>Cette partie présente l’utilisation du package <em>pmeasyr</em>.</p>
<p>Le package prend en charge les données des quatre champs PMSI MCO, SSR, HAD, PSY ainsi que les RSF.</p>
<div id="les-archives-pmsi" class="section level2">
<h2><span class="header-section-number">2.1</span> Les archives PMSI</h2>
<div id="gestion-des-archives-dans-des-repertoires" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Gestion des archives dans des répertoires</h3>
<p>Placer les archives dans un répertoire, par exemple ici dans <code>~/Documents/data/mco</code> :</p>
<div class="figure">
<img src="images/archives_mco.png" alt="Archives MCO" />
<p class="caption">Archives MCO</p>
</div>
<p>Vous noterez que pour chaque champ PMSI il est conseillé d’utiliser un répertoire indépendant, ceci est nécessaire dans la mesure où le nom des archives PMSI ne contient pas l’information champ MCO, RSF, etc., il faut organiser l’archivage champ par champ, dans des répertoires différents.</p>
<div class="figure">
<img src="images/champ_par_champ.png" alt="Un répertoire par champ PMSI" />
<p class="caption">Un répertoire par champ PMSI</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Créer l&#39;arborescence à partir de R</span>
champs =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;mco&#39;</span>, <span class="st">&#39;ssr&#39;</span>, <span class="st">&#39;had&#39;</span>, <span class="st">&#39;psy&#39;</span>, <span class="st">&#39;rsf&#39;</span>)
emplacement &lt;-<span class="st"> &quot;~/Documents/data&quot;</span>
<span class="kw">sapply</span>(champs, function(x){<span class="kw">dir.create</span>(<span class="kw">file.path</span>(emplacement, x))})</code></pre></div>
</div>
<div id="informations-sur-les-archives" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Informations sur les archives</h3>
<p>La fonction astat permet d’éditer des statistiques sommaires sur les fichiers contenus dans une archive.</p>
<table>
<thead>
<tr class="header">
<th align="left">Nom</th>
<th align="left">Fonction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://github.com/IM-APHP/pmeasyr/tree/master/Rd_md/astat.Rmd">astat</a></td>
<td align="left">~ *.zip - Liste et volume des fichiers d’une archive PMSI</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Informations sur les fichiers : Date de creation, Taille</span>
pmeasyr::<span class="kw">astat</span>(<span class="dt">path =</span> <span class="st">&#39;~/Documents/data/mco/&#39;</span>, 
               <span class="dt">file =</span> <span class="st">&#39;750100042.2015.12.29012016174032.out.zip&#39;</span>, 
               <span class="dt">view =</span> F)</code></pre></div>
</div>
<div id="dezippage" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Dézippage</h3>
<p>Cette partie du package facilite la manipulation des archives PMSI, fichiers de type :</p>
<ul>
<li>finess.annee.mois.date_et_heure_de_creation.in.zip</li>
<li>finess.annee.mois.date_et_heure_de_creation.out.zip</li>
</ul>
<p>Les fonctions permettent de dezipper les fichiers depuis R en ligne de commande, sans intervention manuelle de l’utilisateur. L’avantage est d’obtenir un processus ne relevant pas d’interventions externes au logiciel R (pour pouvoir garder trace des etapes, et faciliter la reproduction, tout est inscrit dans un programme, dans un flux de processus). Une fois que les traitements et analyses sur les fichiers sont faits, il est possible d’effacer les archives egalement en ligne de commande.</p>
<p>Le nom des fonctions dont l’objectif est de manipuler les <strong>a</strong>rchives commence par <strong>a</strong>.</p>
<table>
<colgroup>
<col width="11%" />
<col width="88%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Nom</th>
<th align="left">Fonction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://github.com/IM-APHP/pmeasyr/tree/master/Rd_md/adezip.Rmd">adezip</a></td>
<td align="left">~ *.zip - Dezippe des fichiers de larchive PMSI</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/IM-APHP/pmeasyr/tree/master/Rd_md/adezip2.Rmd">adezip2</a></td>
<td align="left">~ *.zip - Dezippe des fichiers de l’archive PMSI, avec en parametre le nom de l’archive</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Dezippage uniquement des fichiers rsa, ano et tra du out 2015</span>
<span class="co"># Ex: 750100042.2015.12.20160130.153012.out.zip</span>
pmeasyr::<span class="kw">adezip</span>(<span class="dt">finess =</span> <span class="dv">750100042</span>, 
                <span class="dt">annee =</span> <span class="dv">2015</span>, 
                <span class="dt">mois =</span> <span class="dv">12</span>, 
                <span class="dt">path =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>, 
                <span class="dt">liste =</span> <span class="kw">c</span>(<span class="st">&quot;rsa&quot;</span>, <span class="st">&quot;ano&quot;</span>, <span class="st">&quot;tra&quot;</span>), 
                <span class="dt">type =</span> <span class="st">&quot;out&quot;</span>)</code></pre></div>
<div class="figure">
<img src="images/archives_dezip.png" alt="Après éxécution de adezip() sur des fichiers du out" />
<p class="caption">Après éxécution de <code>adezip()</code> sur des fichiers du <em>out</em></p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Dezippage uniquement des fichiers rss, dmi et med du in 2014</span>
<span class="co"># Ex: 750100042.2015.12.20160130.153012.out.zip</span>
pmeasyr::<span class="kw">adezip</span>(<span class="dt">finess =</span> <span class="dv">750100042</span>, 
                <span class="dt">annee =</span> <span class="dv">2015</span>, 
                <span class="dt">mois =</span> <span class="dv">12</span>, 
                <span class="dt">path =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>, 
                <span class="dt">liste =</span> <span class="kw">c</span>(<span class="st">&quot;rss&quot;</span>, <span class="st">&quot;dmi&quot;</span>, <span class="st">&quot;med&quot;</span>), 
                <span class="dt">type =</span> <span class="st">&quot;in&quot;</span>)</code></pre></div>
<div class="figure">
<img src="images/archives_mco_in.png" alt="Après éxécution de adezip() sur des fichiers du in" />
<p class="caption">Après éxécution de <code>adezip()</code> sur des fichiers du <em>in</em></p>
</div>
</div>
<div id="adelete-effacer" class="section level3">
<h3><span class="header-section-number">2.1.4</span> adelete : effacer</h3>
<p>À la fin d’une étude, il est inutile de garder les fichiers dézippés hors de l’archives, on peut les effacern c’est ce que permet la fonction <code>adelete()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Effacer les fichiers</span>
pmeasyr::<span class="kw">adelete</span>(<span class="dt">finess =</span> <span class="dv">750100042</span>, 
                 <span class="dt">annee =</span> <span class="dv">2015</span>, 
                 <span class="dt">mois =</span> <span class="dv">12</span>, 
                 <span class="dt">path =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>, 
                 <span class="dt">liste =</span> <span class="kw">c</span>(<span class="st">&quot;rsa&quot;</span>, <span class="st">&quot;ano&quot;</span>, <span class="st">&quot;tra&quot;</span>), 
                 <span class="dt">type =</span> <span class="st">&quot;out&quot;</span>)

pmeasyr::<span class="kw">adelete</span>(<span class="dt">finess =</span> <span class="dv">750100042</span>, 
                 <span class="dt">annee =</span> <span class="dv">2015</span>, 
                 <span class="dt">mois =</span> <span class="dv">12</span>, 
                 <span class="dt">path =</span> <span class="st">&#39;~/Documents/data/mco&#39;</span>, 
                 <span class="dt">liste =</span> <span class="kw">c</span>(<span class="st">&quot;rss&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;dmi&quot;</span>), 
                 <span class="dt">type =</span> <span class="st">&quot;in&quot;</span>)</code></pre></div>
<div class="figure">
<img src="images/archives_mco.png" alt="Après éxécution de adelete()" />
<p class="caption">Après éxécution de <code>adelete()</code></p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="literature.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-Imports.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
